buildscript {
    repositories {
        google()
        mavenCentral()
        jcenter()
        gradlePluginPortal()
    }

    dependencies {
        classpath "com.android.tools.build:gradle:7.4.2" // Use the version you need.
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" // Use the version you need.
    }
}


plugins { id 'base' }
apply plugin: 'kotlin'

repositories {
    jcenter()
}

task createClasspathManifest {
    def outputDir = file("$buildDir/$name")

    inputs.files sourceSets.main.runtimeClasspath
    outputs.dir outputDir

    doLast {
        outputDir.mkdirs()
        file("$outputDir/plugin-classpath.txt").text = sourceSets.main.runtimeClasspath.join("\n")
    }
}

compileKotlin { kotlinOptions { jvmTarget = JavaVersion.VERSION_11 } }
compileTestKotlin { kotlinOptions { jvmTarget = JavaVersion.VERSION_11 } }

dependencies {
    testRuntimeOnly files(createClasspathManifest)

    implementation "commons-io:commons-io:2.5"
    implementation "commons-codec:commons-codec:1.10"
    testImplementation gradleTestKit()
    testImplementation "junit:junit:4.12"
    testImplementation('org.spockframework:spock-core:1.1-groovy-2.4') {
        exclude module: 'groovy-all'
    }
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"

}





