apply plugin: 'com.android.library'
apply from: "$rootProject.projectDir/buildconfig/kotlin/module.gradle"
apply plugin: 'io.hansel.preprocessor.module'
apply plugin: "de.mannodermaus.android-junit5"

buildscript {
    repositories {
        mavenCentral()
        maven { url 'https://hansel.io/maven' }
        jcenter()
    }
    dependencies {
        classpath rootProject.ext.miscDependencies.hansel
        classpath rootProject.ext.miscDependencies.androidjunit5
    }
}

android {
    sourceSets.each {
        it.java.srcDirs += "src/$it.name/kotlin"
    }
    sourceSets {
        test {
            resources.srcDirs += ['src/test/resources']
        }
    }

    testOptions {
        junitPlatform {
            filters {
                engines {
                    include 'spek2'
                }
            }
        }
        unitTests.all {
            testLogging.events = ["passed", "skipped", "failed"]
        }
    }
}

dependencies {
	implementation rootProject.ext.unifyDependencies.principles
    implementation project(rootProject.ext.features.resourcesCommon)

    implementation rootProject.ext.tkpdInternalLibDependencies.cacheapi
    implementation rootProject.ext.tkpdInternalLibDependencies.usecase
    implementation rootProject.ext.tkpdInternalLibDependencies.url
    implementation rootProject.ext.tkpdInternalLibDependencies.network
    implementation rootProject.ext.tkpdInternalLibDependencies.usersession
    implementation project(rootProject.ext.libraries.graphql)

    implementation rootProject.ext.supportLibDependencies.kotlinSupportJdk8

    implementation rootProject.ext.miscDependencies.loaderviewlibrary
    implementation rootProject.ext.miscDependencies.rxJavaComputation
    implementation rootProject.ext.miscDependencies.gson
    implementation rootProject.ext.miscDependencies.multiDex
    implementation rootProject.ext.miscDependencies.dagger
    annotationProcessor rootProject.ext.miscDependencies.daggerCompiler

    implementation rootProject.ext.networkDependencies.retrofit
    implementation rootProject.ext.testDependencies.androidAnnotation
    implementation rootProject.ext.debugToolsDependencies.chuck

    testImplementation rootProject.ext.unifyDependencies.principles
    androidTestImplementation rootProject.ext.unifyDependencies.principles
    testImplementation rootProject.ext.testDependencies.mockk
    testImplementation rootProject.ext.testDependencies.spek2Api
    testImplementation rootProject.ext.testDependencies.spek2Dsl
    testImplementation rootProject.ext.testDependencies.kotlinTest
    testImplementation rootProject.ext.testDependencies.retrofitMockWebser
    testImplementation rootProject.ext.supportLibDependencies.kotlinReflection
}

project.ext {
    artifactId = 'media-uploader'
    groupId = 'com.tokopedia.library'
    versionName = "0.0.2"
    artifactName = "mediauploader-release"
}

apply from: '../../publish_local.gradle'