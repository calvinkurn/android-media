apply plugin: 'com.android.library'
apply from: "$rootProject.projectDir/buildconfig/module.gradle"
apply plugin: 'io.hansel.preprocessor.module'

buildscript {
    repositories {
        maven { url 'https://maven.fabric.io/public' }
        maven { url "https://oss.sonatype.org/content/repositories/snapshots/" }
        mavenCentral()
        jcenter()
        maven { url 'https://maven-hansel.tokopedia.com/maven' }
    }
    dependencies {
        classpath rootProject.ext.miscDependencies.hansel
    }
}

android {
    defaultConfig {
        javaCompileOptions {
            annotationProcessorOptions {
                arguments = ['targetModuleName': 'TkpdCore']
            }
        }
    }
}

dependencies {

    implementation projectOrAar(rootProject.ext.features.resourcesCommon)
    implementation projectOrAar(rootProject.ext.libraries.tkpddesign)
    implementation projectOrAar(rootProject.ext.libraries.tkpdabstraction)
    implementation projectOrAar(rootProject.ext.features.loyaltyCommon)
    implementation projectOrAar(rootProject.ext.libraries.applink)
    implementation projectOrAar(rootProject.ext.libraries.coreNetwork)
    implementation projectOrAar(rootProject.ext.libraries.imagePickerCommon)
    implementation rootProject.ext.tkpdInternalLibDependencies.authentication
    implementation projectOrAar(rootProject.ext.libraries.applink)
    implementation projectOrAar(rootProject.ext.libraries.remoteConfig)
    implementation projectOrAar(rootProject.ext.libraries.analytics)
    implementation projectOrAar(rootProject.ext.libraries.utils)
    implementation projectOrAar(rootProject.ext.features.purchase_platform_common)
    implementation projectOrAar(rootProject.ext.features.referral)
    implementation projectOrAar(rootProject.ext.libraries.analytics)
    implementation projectOrAar(rootProject.ext.libraries.linker)
    implementation projectOrAar(rootProject.ext.libraries.weaver)
    implementation projectOrAar(rootProject.ext.libraries.core_legacy)
    implementation projectOrAar(rootProject.ext.libraries.track)
    implementation projectOrAar(rootProject.ext.libraries.webview)

    implementation rootProject.ext.unifyDependencies.principles
    implementation rootProject.ext.unifyDependencies.components
    implementation rootProject.ext.unifyDependencies.icons
    implementation rootProject.ext.unifyDependencies.global_error
    implementation rootProject.ext.tkpdInternalLibDependencies.usecase
    implementation projectOrAar(rootProject.ext.libraries.graphql)
    implementation rootProject.ext.tkpdInternalLibDependencies.network
    implementation rootProject.ext.tkpdInternalLibDependencies.url
    implementation rootProject.ext.tkpdInternalLibDependencies.cachemanager
    implementation rootProject.ext.tkpdInternalLibDependencies.network
    implementation rootProject.ext.tkpdInternalLibDependencies.globalconfig
    implementation rootProject.ext.tkpdInternalLibDependencies.usersession

    implementation rootProject.ext.supportLibDependencies.constraintLayout
    implementation rootProject.ext.miscDependencies.loaderviewlibrary
    implementation rootProject.ext.miscDependencies.roundCornerProgressBar
    implementation rootProject.ext.tkpdLibDependencies.youtubePlayer
    implementation rootProject.ext.playServicesDependencies.plus
    implementation rootProject.ext.playServicesDependencies.base
    implementation rootProject.ext.firebase.appIndexing
    implementation rootProject.ext.playServicesDependencies.analytics
    implementation rootProject.ext.firebase.messaging
    implementation rootProject.ext.playServicesDependencies.location
    implementation rootProject.ext.playServicesDependencies.maps
    implementation rootProject.ext.playServicesDependencies.auth
    implementation rootProject.ext.playServicesDependencies.places

    implementation rootProject.ext.dbDependencies.dbRoomRuntime
    implementation projectOrAar(rootProject.ext.libraries.logger)
    annotationProcessor rootProject.ext.dbDependencies.dbRoomCompiler
    implementation rootProject.ext.networkDependencies.glide
    implementation rootProject.ext.analyticsDependencies.appsflyer
    implementation rootProject.ext.analyticsDependencies.installRef

    implementation rootProject.ext.miscDependencies.lottie
    implementation rootProject.ext.miscDependencies.scannerZxing
    implementation rootProject.ext.miscDependencies.multiDex
    implementation rootProject.ext.miscDependencies.gson
    implementation(rootProject.ext.miscDependencies.facebook) {
        exclude group: 'com.android.support'
    }
    implementation rootProject.ext.debugToolsDependencies.chuck
    implementation rootProject.ext.firebase.messaging
    implementation rootProject.ext.firebase.config
    debugImplementation rootProject.ext.debugToolsDependencies.stetho
    implementation rootProject.ext.miscDependencies.dagger
    annotationProcessor rootProject.ext.miscDependencies.daggerCompiler
    implementation (rootProject.ext.firebase.crashlytics) {
        transitive = true
    }
    
    androidTestImplementation(rootProject.ext.testDependencies.espressoCore, {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    testImplementation  rootProject.ext.testDependencies.assertJ
}

project.ext {
    artifactId = 'core'
    groupId = 'com.tokopedia.core'
    versionName = "0.0.2"
    artifactName ="tkpdcore-release"
}

apply from: '../publish_local.gradle'