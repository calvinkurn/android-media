package com.tokopedia.play.broadcaster.ui.viewholder.setup

import android.annotation.SuppressLint
import android.graphics.Color
import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import com.tokopedia.play.broadcaster.databinding.ItemSetupCoverAutoGeneratedBinding
import com.tokopedia.play.broadcaster.ui.model.setup.AutoGeneratedCoverIUModel
import com.tokopedia.play.broadcaster.view.adapter.PlayAutoGeneratedCoverAdapter

/**
 * Created by fachrizalmrsln on 16/01/23
 */
class PlayAutoGeneratedCoverViewHolder(
    private val listener: PlayAutoGeneratedCoverAdapter.Listener,
    private val binding: ItemSetupCoverAutoGeneratedBinding,
) : RecyclerView.ViewHolder(binding.root) {

    @SuppressLint("Range")
    fun bind(data: AutoGeneratedCoverIUModel) {
        isItemChecked(data.isChecked)
        binding.root.setBackgroundColor(Color.parseColor(data.background))
        binding.root.setOnClickListener {
            if (binding.rbSelectedAutoGeneratedCover.isChecked) return@setOnClickListener
            listener.onClickItem(data, bindingAdapterPosition)
        }
    }

    private fun isItemChecked(checked: Boolean) = with(binding.rbSelectedAutoGeneratedCover) {
        isChecked = checked
    }

    companion object {
        fun create(listener: PlayAutoGeneratedCoverAdapter.Listener, parent: ViewGroup) = PlayAutoGeneratedCoverViewHolder(
            listener,
            ItemSetupCoverAutoGeneratedBinding.inflate(
                LayoutInflater.from(parent.context),
                parent,
                false,
            ),
        )
    }

}
