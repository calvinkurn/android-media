apply plugin: 'com.android.library'
apply from: "$rootProject.projectDir/buildconfig/kotlin/module.gradle"
apply from: "../../../compile-instrument-test.gradle"
apply plugin: 'io.hansel.preprocessor.module'

buildscript {
    repositories {
        google()
        mavenCentral()
        maven { url 'https://maven-hansel.tokopedia.com/maven' }
    }
    dependencies {
        classpath rootProject.ext.miscDependencies.hansel
    }
}

android {
    namespace 'com.tokopedia.play'
    testNamespace 'com.tokopedia.play.test'
    sourceSets {
        String sharedTestDir = 'src/sharedTest/java'
        test {
            java.srcDir sharedTestDir
        }
        androidTest {
            java.srcDir sharedTestDir
        }
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_11
    }

    defaultConfig {
        multiDexEnabled true
        testInstrumentationRunner "com.tokopedia.test.application.environment.InstrumentationTestRunner"
    }

    testOptions {
        animationsDisabled = true
    }

    buildFeatures {
        viewBinding true
        buildConfig true
    }
}

dependencies {
    implementation projectOrAar(rootProject.ext.libraries.applink)
    implementation projectOrAar(rootProject.ext.libraries.tkpdabstraction)
    implementation projectOrAar(rootProject.ext.libraries.adapterDelegate)
    implementation projectOrAar(rootProject.ext.libraries.track)
    implementation projectOrAar(rootProject.ext.libraries.trackingOptimizer)
    implementation projectOrAar(rootProject.ext.libraries.analytics)
    implementation projectOrAar(rootProject.ext.libraries.floatingWindow)
    implementation projectOrAar(rootProject.ext.libraries.remoteConfig)
    implementation projectOrAar(rootProject.ext.libraries.keys)
    implementation projectOrAar(rootProject.ext.libraries.universal_sharing)
    implementation projectOrAar(rootProject.ext.libraries.linker)
    implementation projectOrAar(rootProject.ext.libraries.utils)

    implementation projectOrAar(rootProject.ext.features.playCommon)
    implementation projectOrAar(rootProject.ext.features.contentCommon)
    implementation projectOrAar(rootProject.ext.features.contentAnalytic)
    implementation projectOrAar(rootProject.ext.features.atc_common)
    implementation projectOrAar(rootProject.ext.features.localizationchooseaddress_common)
    implementation projectOrAar(rootProject.ext.features.resourcesCommon)
    implementation projectOrAar(rootProject.ext.features.productDetailCommon)
    implementation projectOrAar(rootProject.ext.features.medialoader)
    implementation projectOrAar(rootProject.ext.features.localizationchooseaddress)
    implementation projectOrAar(rootProject.ext.features.playWidget)
    implementation projectOrAar(rootProject.ext.features.atcVariant)
    implementation projectOrAar(rootProject.ext.features.shopCommon)

    implementation rootProject.ext.tkpdLibDependencies.youtubePlayer
    implementation projectOrAar(rootProject.ext.libraries.youtubePlayer)

    implementation rootProject.ext.tkpdInternalLibDependencies.url
    implementation rootProject.ext.tkpdInternalLibDependencies.usecase
    implementation projectOrAar(rootProject.ext.libraries.usersession)
    implementation projectOrAar(rootProject.ext.libraries.network)
    implementation projectOrAar(rootProject.ext.libraries.graphql)
    implementation projectOrAar(rootProject.ext.libraries.logger)
    implementation rootProject.ext.tkpdInternalLibDependencies.globalconfig
    implementation rootProject.ext.tkpdInternalLibDependencies.gqlquery_annotation
    implementation projectOrAar(rootProject.ext.libraries.cmPushNotifications)
    ksp project(rootProject.ext.libraries.gqlKspProcessor)

    implementation rootProject.ext.supportLibDependencies.constraintLayout
    implementation rootProject.ext.miscDependencies.roundCornerProgressBar
    implementation(rootProject.ext.firebase.crashlytics) {
        transitive = true
    }

    implementation rootProject.ext.miscDependencies.coroutineCore
    implementation rootProject.ext.miscDependencies.coroutineAndroid
    implementation rootProject.ext.miscDependencies.lottie
    implementation rootProject.ext.miscDependencies.multiDex
    implementation rootProject.ext.miscDependencies.viewModelKtx
    implementation rootProject.ext.miscDependencies.lifecycleRuntimeKtx
    implementation rootProject.ext.miscDependencies.window

    implementation rootProject.ext.networkDependencies.glide

    implementation rootProject.ext.unifyDependencies.principles
    implementation rootProject.ext.unifyDependencies.components
    implementation rootProject.ext.unifyDependencies.coach_mark
    implementation rootProject.ext.unifyDependencies.icons
    implementation rootProject.ext.unifyDependencies.dialog
    implementation rootProject.ext.unifyDependencies.global_error

    testImplementation rootProject.ext.testDependencies.mockk
    testImplementation rootProject.ext.testDependencies.assertJCore
    testImplementation rootProject.ext.miscDependencies.coroutineTest
    testImplementation rootProject.ext.testDependencies.archCoreTesting
    testImplementation rootProject.ext.testDependencies.junitJupiterApi
    testImplementation rootProject.ext.testDependencies.junitPlatformRunner
    testImplementation projectOrAar(rootProject.ext.libraries.unitTest)
    testRuntimeOnly rootProject.ext.testDependencies.junitJupiterEngine

    implementation rootProject.ext.miscDependencies.exoPlayerCore
    implementation rootProject.ext.miscDependencies.exoPlayerUi
    implementation rootProject.ext.miscDependencies.exoPlayerCastExt
    implementation rootProject.ext.playServicesDependencies.cast

    androidTestImplementation rootProject.ext.testDependencies.fragmentTest

    androidTestImplementation rootProject.ext.testDependencies.assertJCore
    androidTestImplementation rootProject.ext.miscDependencies.coroutineTest
    androidTestImplementation rootProject.ext.testDependencies.mockkAndroid
    androidTestImplementation rootProject.ext.testDependencies.archCoreTesting
    androidTestImplementation rootProject.ext.testDependencies.espressoContrib
    androidTestImplementation rootProject.ext.testDependencies.espressoCore
    androidTestImplementation rootProject.ext.testDependencies.espressoIntents
    androidTestImplementation rootProject.ext.testDependencies.androidxTest
    androidTestImplementation rootProject.ext.testDependencies.mockkAndroid

    androidTestImplementation projectOrAar(rootProject.ext.libraries.instrumentation_test)
    androidTestImplementation rootProject.ext.tkpdInternalLibDependencies.cassavaTest
    androidTestImplementation projectOrAar(rootProject.ext.features.contentTest)

    androidTestImplementation rootProject.ext.miscDependencies.dagger
    kaptAndroidTest rootProject.ext.miscDependencies.daggerCompiler
}

project.ext {
    artifactId = 'play'
    groupId = 'com.tokopedia.content'
    versionName = "0.0.2"
    artifactName = "play-release"
}

apply from: '../../../publish_local.gradle'
apply from: '../../../jacoco_task.gradle'
apply from: '../../../sonar_config.gradle'
