apply plugin: 'com.android.library'
apply from: "$rootProject.projectDir/buildconfig/kotlin/core-module.gradle"
apply plugin: 'io.hansel.preprocessor.module'
apply plugin: 'kotlin-kapt'
apply plugin: 'kotlin-parcelize'

buildscript {
    repositories {
        google()
        mavenCentral()
        maven { url 'https://maven-hansel.tokopedia.com/maven' }
    }
    dependencies {
        classpath rootProject.ext.miscDependencies.hansel
    }
}

android {
    defaultConfig {
        multiDexEnabled true
        testInstrumentationRunner "com.tokopedia.test.application.environment.InstrumentationTestRunner"
    }

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
    }

    buildFeatures {
        viewBinding true
    }

    testOptions {
        animationsDisabled = true
    }
}

kapt {
    correctErrorTypes = true
    useBuildCache = true
}

dependencies {

    implementation rootProject.ext.supportLibDependencies.design
    implementation rootProject.ext.supportLibDependencies.recyclerViewV7
    implementation rootProject.ext.supportLibDependencies.kotlinSupportJdk8
    implementation rootProject.ext.supportLibDependencies.constraintLayout

    implementation projectOrAar(rootProject.ext.features.medialoader)

    implementation projectOrAar(rootProject.ext.libraries.tkpdabstraction)
    implementation projectOrAar(rootProject.ext.libraries.applink)
    implementation projectOrAar(rootProject.ext.libraries.track)
    implementation projectOrAar(rootProject.ext.libraries.utils)
    implementation projectOrAar(rootProject.ext.libraries.adapterDelegate)
    implementation projectOrAar(rootProject.ext.libraries.kotlinExtensions)
    implementation projectOrAar(rootProject.ext.libraries.graphql)
    implementation projectOrAar(rootProject.ext.libraries.remoteConfig)
    implementation projectOrAar(rootProject.ext.libraries.commonNetwork)

    implementation rootProject.ext.unifyDependencies.components
    implementation rootProject.ext.unifyDependencies.icons
    implementation rootProject.ext.unifyDependencies.principles
    implementation rootProject.ext.unifyDependencies.dialog
    implementation rootProject.ext.unifyDependencies.global_error

    implementation rootProject.ext.tkpdInternalLibDependencies.url
    implementation rootProject.ext.tkpdInternalLibDependencies.usecase
    implementation rootProject.ext.tkpdInternalLibDependencies.network
    implementation rootProject.ext.tkpdInternalLibDependencies.globalconfig
    implementation rootProject.ext.tkpdInternalLibDependencies.usersession

    implementation(rootProject.ext.debugToolsDependencies.chuck) {
        exclude group: 'com.squareup.okhttp3'
        exclude group: 'com.squareup.okio'
        exclude group: 'com.android.support'
    }

    implementation rootProject.ext.networkDependencies.loggingInterceptor
    implementation rootProject.ext.networkDependencies.retrofit
    implementation rootProject.ext.networkDependencies.converterGson

    implementation rootProject.ext.miscDependencies.coroutineCore
    implementation rootProject.ext.miscDependencies.gson
    implementation rootProject.ext.miscDependencies.multiDex
    implementation rootProject.ext.miscDependencies.cameraView
    implementation rootProject.ext.miscDependencies.dagger
    kapt rootProject.ext.miscDependencies.daggerCompiler
    androidTestImplementation rootProject.ext.miscDependencies.dagger
    kaptAndroidTest rootProject.ext.miscDependencies.daggerCompiler

    testImplementation rootProject.ext.testDependencies.mockk
    testImplementation rootProject.ext.testDependencies.kotlinTest
    testImplementation rootProject.ext.testDependencies.assertJCore
    testImplementation rootProject.ext.miscDependencies.coroutineTest
    testImplementation rootProject.ext.testDependencies.archCoreTesting
    testImplementation rootProject.ext.supportLibDependencies.kotlinReflection
    testImplementation projectOrAar(rootProject.ext.libraries.unitTest)

    androidTestImplementation rootProject.ext.firebase.messaging
    androidTestImplementation rootProject.ext.miscDependencies.coroutineTest

    androidTestImplementation rootProject.ext.testDependencies.androidTestRunner
    androidTestImplementation rootProject.ext.testDependencies.archCoreTesting
    androidTestImplementation rootProject.ext.testDependencies.androidxTest
    androidTestImplementation rootProject.ext.testDependencies.espressoCore
    androidTestImplementation rootProject.ext.testDependencies.espressoContrib
    androidTestImplementation rootProject.ext.testDependencies.espressoIntents
    androidTestImplementation rootProject.ext.tkpdInternalLibDependencies.cachemanager
    androidTestImplementation rootProject.ext.playServicesDependencies.analytics

    androidTestImplementation projectOrAar(rootProject.ext.libraries.analytics)
    androidTestImplementation projectOrAar(rootProject.ext.libraries.analyticsDebugger)
    androidTestImplementation projectOrAar(rootProject.ext.libraries.cassavaTest)
    androidTestImplementation projectOrAar(rootProject.ext.libraries.instrumentation_test)
}

project.ext {
    artifactId = 'update-inactive-phone'
    groupId = 'com.tokopedia.user'
    versionName = "0.0.2"
    artifactName = "updateinactivephone-release"
}

apply from: '../../../publish_local.gradle'
apply from: '../../../jacoco_task.gradle'
apply from: '../../../sonar_config.gradle'

